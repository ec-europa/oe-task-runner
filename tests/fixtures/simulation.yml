- command: "drupal:site-install"
  configuration: []
  composer: ''
  contains:
    - "[Simulator] Running ./vendor/bin/drush -y --root=$(pwd)/build --site-name='Site name' --site-mail=info@example.org --locale=en --account-mail=admin@example.org --account-name=admin --account-pass=admin --exclude=build --db-url='mysql://root:root@127.0.0.1:3306/drupal' site-install standard"

- command: 'drupal:site-install --site-name="Test site"'
  configuration: []
  composer: ''
  contains:
    - "[Simulator] Running ./vendor/bin/drush -y --root=$(pwd)/build --site-name='Test site' --site-mail=info@example.org --locale=en --account-mail=admin@example.org --account-name=admin --account-pass=admin --exclude=build --db-url='mysql://root:root@127.0.0.1:3306/drupal' site-install standard"

- command: 'drupal:site-install --site-mail="test@example.com" --site-profile=minimal'
  configuration: []
  composer: ''
  contains:
    - "site-install minimal"
    - "--site-mail=test@example.com"

- command: 'drupal:site-install'
  configuration:
    drupal:
      root: 'test'
      site:
        profile: 'minimal'
  composer: ''
  contains:
    - "./vendor/bin/drush -y --root=$(pwd)/test"
    - "site-install minimal"

- command: 'drupal:site-install --root="overridden"'
  configuration:
    drupal:
      root: './test'
  composer: ''
  contains:
    - "./vendor/bin/drush -y --root=$(pwd)/overridden"

- command: 'drupal:site-install --root="overridden"'
  configuration:
    runner:
      bin-dir: "./bin"
  composer: ''
  contains:
    - "./bin/drush -y --root=$(pwd)/overridden"

- command: 'drupal:site-post-install'
  configuration:
    drupal:
      post_install:
        - "./vendor/bin/drush en views -y"
        - "./vendor/bin/drush cr"
  composer: ''
  contains:
    - "./vendor/bin/drush en views -y"
    - "./vendor/bin/drush cr"

- command: 'drupal:site-install'
  configuration:
    drupal:
      post_install:
        - "./vendor/bin/drush en views -y"
        - "./vendor/bin/drush cr"
  composer: ''
  contains:
    - "[Simulator] Running ./vendor/bin/drush -y --root=$(pwd)/build --site-name='Site name' --site-mail=info@example.org --locale=en --account-mail=admin@example.org --account-name=admin --account-pass=admin --exclude=build --db-url='mysql://root:root@127.0.0.1:3306/drupal' site-install standard"
    - "./vendor/bin/drush en views -y"
    - "./vendor/bin/drush cr"

- command: 'changelog:generate'
  configuration:
    github:
      token: "abc"
  composer: ''
  contains:
    - "exec('ec-europa/oe-task-runner -t abc')"

- command: 'changelog:generate --token def'
  configuration:
    github:
      token: "abc"
  composer: ''
  contains:
    - "exec('ec-europa/oe-task-runner -t def')"

- command: 'changelog:generate --tag 1.2.3'
  configuration:
    github:
      token: "abc"
  composer: ''
  contains:
    - "exec('ec-europa/oe-task-runner -t abc --future-release=1.2.3')"

- command: 'changelog:generate --token 123 --tag 1.2.3'
  configuration:
    github:
      token: "abc"
  composer: ''
  contains:
    - "exec('ec-europa/oe-task-runner -t 123 --future-release=1.2.3')"

- command: 'drupal:component-scaffold'
  configuration: []
  composer: >
    {
      "name": "foo/bar",
      "type": "drupal-module"
    }
  contains:
    - "symlink('../../..', 'build/modules/custom/bar')"
    - "[Simulator] Running ./vendor/bin/run 'setup:behat'"
    - "[Simulator] Running ./vendor/bin/run 'setup:phpunit'"
    - "WriteConfiguration('build/sites/default/drushrc.php'"
    - "AppendConfiguration('build/sites/default/default.settings.php'"

- command: 'drupal:component-scaffold'
  configuration:
    drupal:
      root: "web"
  composer: >
    {
      "name": "foo/bar",
      "type": "drupal-theme"
    }
  contains:
    - "symlink('../../..', 'web/themes/custom/bar')"

- command: 'drupal:component-scaffold'
  configuration:
    drupal:
      core: "7"
  composer: >
    {
      "name": "foo/bar",
      "type": "drupal-module"
    }
  contains:
    - "symlink('../../../../..', 'build/sites/all/modules/custom/bar')"

- command: 'drupal:component-scaffold'
  configuration:
    drupal:
      core: "7"
  composer: >
    {
      "name": "foo/bar",
      "type": "drupal-theme"
    }
  contains:
    - "symlink('../../../../..', 'build/sites/all/themes/custom/bar')"
